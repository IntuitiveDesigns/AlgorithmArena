# -----------------------------------------------------------------------
# OPTIMIZED FOR: High Throughput & NVMe Storage Efficiency
# CONTEXT: No S3 Tiering; Broker is the Source of Truth
# -----------------------------------------------------------------------

# BATCHING STRATEGY
# Wait up to 20ms to group messages together.
linger.ms=20

# Maximum size of a batch (128KB). Larger batches = fewer disk seeks.
batch.size=131072

# COMPRESSION
# Crucial for local NVMe storage. 'lz4' is the best balance of speed/ratio.
# This effectively increases your expensive NVMe capacity.
compression.type=lz4

# DURABILITY & RELIABILITY
# Since there is no S3 backup, we must ensure data hits all replicas.
acks=all
retries=2147483647
max.in.flight.requests.per.connection=5

# MEMORY BUFFERING
# 64MB buffer. Gives the producer "breathing room" to stack messages
# while waiting for the linger.ms timer or broker acks.
buffer.memory=67108864

bootstrap.servers=localhost:9092